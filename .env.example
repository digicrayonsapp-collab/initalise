# =========================
# Zoho People (OAuth2)
# =========================
ZOHO_CLIENT_ID=<ZOHO_CLIENT_ID>
ZOHO_CLIENT_SECRET=<ZOHO_CLIENT_SECRET>
ZOHO_REFRESH_TOKEN=<ZOHO_REFRESH_TOKEN>

# Zoho DC: use "in" for India DC, "com" for US/global, "eu" for Europe
ZOHO_DC=com

# Zoho field key where we write the official email back (if you do provisional updates)
ZOHO_OFFICIAL_EMAIL_FIELD_KEY=Other_Email

# =========================
# Microsoft Entra ID (Azure AD)
# =========================
AZURE_CLIENT_ID=<AZURE_APP_ID>
AZURE_CLIENT_SECRET=<AZURE_CLIENT_SECRET>
AZURE_TENANT_ID=<AZURE_TENANT_ID>

# Optional: only for debugging; normal runs should use client credentials
AZURE_ACCESS_TOKEN=

# Your default Entra domain (UPN suffix)
AZURE_DEFAULT_DOMAIN=<yourtenant>.onmicrosoft.com

# Domain to write back to Zoho as the official email (usually same as UPN suffix)
OFFICIAL_EMAIL_DOMAIN=<yourtenant>.onmicrosoft.com

# =========================
# Sync behavior
# =========================
EMPLOYEE_ID_STRATEGY=zoho_only               # zoho_only | hybrid | azure_first
STRICT_JOIN_ONLY=false                        # if true, only process confirmed joins
ZP_PROVISIONAL_UPDATE=true                    # if true, write provisional email to Zoho

# Page size for Zoho reads (50..500)
SYNC_PAGE_SIZE=200

# Overlap to avoid missing edge updates (minutes)
SYNC_OVERLAP_MINUTES=5

# Graph write concurrency (1..8); keep small for safety
GRAPH_CONCURRENCY=3

# Retry controls
GRAPH_RETRY_MAX=5
GRAPH_RETRY_BASE_MS=500

# Optional allowlists (comma-separated). Leave empty to disable.
SYNC_DOMAIN_ALLOWLIST=
SYNC_DEPT_ALLOWLIST=

# Dry-run avoids writes to Graph; actions are logged and emails sent
DRY_RUN=true

# Log level: debug | info | warn | error
LOG_LEVEL=info

# =========================
# Scheduling windows (local TZ)
# =========================
POSTJOIN_OFFSET_MINUTES=2
PREHIRE_OFFSET_DAYS=5

# Time-of-day to run prehire/offboard tasks (24h, local TZ)
PREHIRE_EXEC_HOUR=12
PREHIRE_EXEC_MIN=20
OFFBOARD_EXEC_HOUR=18
OFFBOARD_EXEC_MIN=32

# =========================
# Email notifications
# =========================
# event = per-success and per-failure emails
# summary = one digest at the end
# both = both behaviors
# off = disable emails
EMAIL_MODE=event
EMAIL_SUBJECT_PREFIX=[Zoho-Azure Sync]

EMAIL_SMTP_HOST=smtp.example.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_SECURE=false
EMAIL_SMTP_USER=<smtp_user>
EMAIL_SMTP_PASS=<smtp_pass>

EMAIL_FROM="Sync Bot <syncbot@example.com>"
EMAIL_TO_SUCCESS=ops@example.com
EMAIL_TO_FAILURE=alerts@example.com
EMAIL_TO_SUMMARY=ops@example.com

# Rate-limit emails (0 = unlimited). Defaults recommended.
EMAIL_RATE_PER_MINUTE=120
EMAIL_HIDE_PII=true

# =========================
# Server
# =========================
PORT=3008
TZ=Asia/Kolkata
NODE_ENV=development
